# 개발 진행 기록

## 2025년 12월 10일

### [1-1] 프로젝트 구조 검토 완료

`main.c` 및 `stm32f10x_it.c` 파일의 위치와 헤더 포함 관계를 확인했습니다.
*   `main.c`: 주변장치 설정, 초기화, 센서 데이터 읽기 및 기본적인 서보모터 테스트 로직이 포함되어 있습니다. 여러 전역 변수와 센서/액추에이터 관련 함수 프로토타입이 정의되어 있습니다.
*   `stm32f10x_it.c`: Cortex-M3 예외 처리기와 주변장치 인터럽트 핸들러를 위한 파일입니다. 현재는 기본 예외 처리기만 구현되어 있으며, USART, EXTI, TIM 등의 인터럽트 핸들러는 비어 있습니다.

프로젝트 구조는 STM32 개발에 일반적인 형태를 따르고 있으며, 필요한 헤더 파일들이 적절히 포함되어 있습니다. 다음 단계는 상태 머신 구현을 위한 전역 변수 및 플래그 선언입니다.

### [1-2] 전역 변수 및 플래그 선언 완료

`user/main.c` 파일에 시스템 상태 머신 구현을 위한 `SystemState_TypeDef` 열거형과 `SystemState` 변수, 그리고 화재 경보 플래그 `Fire_Flag`를 추가했습니다.

*   **`SystemState_TypeDef`**: `IDLE`, `LOCKED`, `ALARM` 세 가지 상태를 정의합니다.
*   **`SystemState`**: 시스템의 현재 상태를 나타내며, 초기값은 `IDLE`로 설정됩니다.
*   **`Fire_Flag`**: 화재 발생 시 `1`로 설정되는 플래그입니다.

이러한 변수들은 시스템의 상태 변화를 관리하고, 각 상태에 따른 로직을 분기하는 데 사용될 것입니다.

### [1-3] 메인 루프 구조화 완료

`user/main.c` 파일의 `main` 함수 내 `while(1)` 루프를 `SystemState` 변수에 기반한 `switch-case` 문으로 재구성하여 상태 머신 기초를 구현했습니다.

*   `IDLE`, `LOCKED`, `ALARM` 세 가지 `case`가 정의되었습니다.
*   현재는 기존 `while(1)` 루프에 있던 모든 센서 데이터 읽기 및 `servo_test_timer` 관련 로직이 `IDLE` 상태 내에 배치되었습니다.
*   `LOCKED` 및 `ALARM` 상태는 현재 비어 있으며, 이후 단계에서 각 상태에 맞는 로직이 구현될 예정입니다.

이로써 시스템 로직 설계의 기반 구조가 마련되었습니다.
